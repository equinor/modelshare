<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
	<meta charset="UTF-8"/>
	<title>Model</title>
</head>
<body>
	<div th:fragment="model(currentModel)">
		<div th:if="${currentModel}" class="panel panel-primary">
			<div class="panel-heading">
				<h3 class="panel-title">Model information</h3>
			</div>
			<div class="panel-body">
				<label class="form-label" for="owner">Owner</label><span class="form-field" id="owner" th:text="${currentModel.owner}" ></span><p />
				<label class="form-label" for="organisation">Owner organisation</label><span class="form-field" id="organisation" th:text="${currentModel.organisation}" ></span><p />
				<label class="form-label" for="mail">Owner email</label><span class="form-field" id="mail" th:text="${currentModel.mail}" ></span><p />
				<label class="form-label" for="lastUpdated">Last updated</label><span class="form-field" id="lastUpdated" th:text="${currentModel.lastUpdated}" ></span><p />

				<a th:if="${viewOnly}" th:href="@{/request(asset=${currentModel.path})}">
					<button class="btn btn-info">Request access</button>
				</a>
				<a th:if="${!viewOnly}" th:attr="data-href=@{/download(asset=${currentModel.path})}" data-toggle="modal" data-target="#confirm-dialog">
					<button class="btn btn-success"><span class="glyphicon glyphicon-cloud-download" aria-hidden="true"></span>&nbsp;Download this model</button>
				</a>
				<br /><br />
				<label class="form-label" for="usage">Usage</label><span class="form-field" id="usage" th:text="${currentModel.usage}" ></span><p />
				
				<!-- Model "task" descriptions -->
				<div th:each="task : ${tasks}" class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
					<div class="panel panel-default"> 
						<div class="panel-heading" role="tab" th:id="'h_'+${task.name}"> 
							<h4 class="panel-title"> 
								<a role="button" data-toggle="collapse" data-parent="#accordion" th:href="'#c_'+${task.name}" aria-expanded="true" th:aria-controls="'c_'+${task.name}"> 
					          		<span th:text="${task.formattedName}"></span> 
					        	</a> 
							</h4> 
						</div>
						<div th:id="'c_'+${task.name}" class="panel-collapse collapse in" role="tabpanel" th:aria-labelledby="'h_'+${task.name}">
							<div class="panel-body" th:utext="${task.formattedDescription}"></div>							
						</div>
					</div>
				</div>
			</div>
		</div>
		<div th:if="${!viewOnly}" th:replace="../fragments/confirm :: confirm('Terms of use', ${downloadTerms})">...</div>
	</div>
</body>
</html>
