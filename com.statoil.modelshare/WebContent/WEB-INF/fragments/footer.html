<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>Footer</title>
</head>
<body>
	<div th:fragment="footer">
		<footer></footer>
		<!-- Bootstrap core JavaScript
    ================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<!-- Bootstrap Markdown -->
		<script th:src="@{js/bootstrap-markdown.js}" type="text/javascript"></script>
		<script th:src="@{js/markdown.js}" type="text/javascript"></script>
		<script th:src="@{js/to-markdown.js}" type="text/javascript"></script>
		<script th:src="@{js/main.js}" type="text/javascript"></script>
		<script>
		$('a[rel=popover]').popover({
			html : true,
			trigger : 'hover',
			placement: 'right', /* right has a bug in Bootstrap V3*/
			content : function() {
				return '<img src="' + $(this).data('img') + '" width="240px"/>';
			}
		});
		$(document).on('change', '.btn-file :file', function() {
		    var input = $(this),
		        numFiles = input.get(0).files ? input.get(0).files.length : 1,
		        label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
		    var form = input.data('form');
		    var span = document.getElementById(form).firstChild;
		    span.textContent = label;		
		});
		</script>
			
		<!-- Model and folder data editing -->
		<script th:src="@{/js/bootstrap-editable.min.js}"></script>
		<script type="text/javascript" th:if="${writeAccess}">
		    $.fn.editable.defaults.mode = 'popup';
		    
			$(document).ready(function() {		

				// enable / disable editing
			    $('#toggleEditEnable').click(function() {
			        $('.editable').editable('toggleDisabled');
			        $('#descriptionEditor').markdown({
			        	savable: true,
						onSave: function(e) {
						    $.post( "edit", { name: "assetDescription", value: e.getContent(), pk: $(e.$element).data("path") } );
						},
			        	function(e) {
			        		e.showEditor();
			        	}
			        });
			    });

				// handle save on the editor
				/*
				$("#descriptionEditor").markdown({
				})				
				*/
			    
			    $('#assetName').editable({
			    	disabled: true,
				    type: 'text',
				    url: 'edit',
				    title: 'Enter model name'
				});
			    		    
			    $('#assetOwner').editable({
			    	disabled: true,
			        type: 'select',
			        url: 'edit',
			        source: 'users',
			        title: 'Select model owner'
			    });			    
			});
		</script>
	</div>
</body>
</html>
